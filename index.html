<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√ºzik Akademisi</title>
    <style>
        body { font-family: sans-serif; background: #1a1a2e; color: white; text-align: center; margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: auto; background: #16213e; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .header-panel { display: flex; justify-content: space-around; background: #0f3460; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .stat span { color: #e94560; font-size: 24px; font-weight: bold; }
        
        /* OYUN ALANI */
        #hedef-alani {
            background: #0f3460; padding: 25px; border-radius: 15px; margin-bottom: 20px; 
            border: 3px solid #e94560; min-height: 120px; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative;
        }
        #hedef-nota { font-size: 50px; color: #ffba08; font-weight: 900; }
        
        /* Gƒ∞TAR TASARIMI */
        .klavye-container { position: relative; display: inline-block; background: #333; border: 4px solid #533483; border-radius: 10px; overflow: hidden; }
        #gitar-resmi { width: 900px !important; display: block; }
        .nota-noktasi { position: absolute; width: 30px; height: 30px; background: rgba(233, 69, 96, 0.6); border: 2px solid white; border-radius: 50%; cursor: pointer; transform: translate(-50%, -50%); z-index: 100; }
        
        /* ≈ûIKLAR (√áOKTAN SE√áMELƒ∞) */
        .options-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 20px; }
        .btn-secenek { padding: 15px 25px; font-size: 18px; font-weight: bold; cursor: pointer; border: none; border-radius: 10px; background: #533483; color: white; transition: 0.2s; }
        .btn-secenek:hover { background: #e94560; }

        #timer-bar { position: absolute; bottom: 0; left: 0; height: 8px; background: #4eeaf6; width: 0%; transition: width 0.1s linear; }
        .btn-start { padding: 15px 40px; font-size: 22px; background: #2ecc71; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div class="container">
    <h1 id="baslik">M√ºzik Akademisi</h1>
    
    <div id="menu">
        <button class="btn-start" onclick="modSec('gitar')">Gƒ∞TAR KLAVYESƒ∞ OYUNU</button>
        <button class="btn-start" onclick="modSec('nota')" style="background:#533483">NOTA OKUMA TESTƒ∞</button>
    </div>

    <div id="game-container" class="hidden">
        <div class="header-panel">
            <div class="stat">Puan: <span id="puan">0</span></div>
            <div class="stat">Hak: <span id="hak">3</span></div>
        </div>

        <div id="hedef-alani">
            <div id="bilgi-yazisi" style="font-size:14px; color:#888">BULUNACAK NOTA:</div>
            <div id="hedef-nota">-</div>
            <div id="timer-bar"></div>
        </div>

        <div id="gitar-modu" class="klavye-container hidden">
            <img id="gitar-resmi" src="gitar.jpg" onerror="this.src='https://via.placeholder.com/900x300/333/fff?text=Lutfen+gitar.jpg+Dosyasini+Yukleyin';">
            <div class="nota-noktasi" style="top: 35.3%; left: 70.59%;" onclick="kontrol('Mƒ∞')"></div>
            <div class="nota-noktasi" style="top: 42.07%; left: 70.81%;" onclick="kontrol('LA')"></div>
            <div class="nota-noktasi" style="top: 48.18%; left: 70.59%;" onclick="kontrol('RE')"></div>
            <div class="nota-noktasi" style="top: 55.82%; left: 70.59%;" onclick="kontrol('SOL')"></div>
            <div class="nota-noktasi" style="top: 62.37%; left: 70.7%;" onclick="kontrol('Sƒ∞')"></div>
            <div class="nota-noktasi" style="top: 68.48%; left: 70.7%;" onclick="kontrol('Mƒ∞')"></div>
            <div class="nota-noktasi" style="top: 35.3%; left: 60.9%;" onclick="kontrol('FA')"></div>
            <div class="nota-noktasi" style="top: 69.36%; left: 61.12%;" onclick="kontrol('FA')"></div>
            <div class="nota-noktasi" style="top: 62.37%; left: 61.01%;" onclick="kontrol('DO')"></div>
            <div class="nota-noktasi" style="top: 41.85%; left: 35.68%;" onclick="kontrol('DO')"></div>
            </div>

        <div id="nota-modu" class="hidden">
            <div style="background:white; padding:20px; border-radius:10px;">
                <svg width="400" height="160" viewBox="0 0 400 160" id="staff-svg"></svg>
            </div>
            <div class="options-container" id="siklar"></div>
        </div>

        <button onclick="location.reload()" style="margin-top:20px; background:#333; color:white; border:none; padding:10px; cursor:pointer; border-radius:5px;">ANA MEN√úYE D√ñN</button>
    </div>
</div>

<script>
    let aktifMod = "", puan = 0, hak = 3, mevcutHedef = "", s√ºre = 50, zamanlayƒ±cƒ±;
    const notalar = ['DO', 'RE', 'Mƒ∞', 'FA', 'SOL', 'LA', 'Sƒ∞'];
    const notaHavuzu = [
        {ad: "DO", y: 130, ledger: [130]}, {ad: "RE", y: 130}, {ad: "Mƒ∞", y: 120},
        {ad: "FA", y: 110}, {ad: "SOL", y: 100}, {ad: "LA", y: 90}, 
        {ad: "Sƒ∞", y: 80}, {ad: "DO", y: 70}, {ad: "RE", y: 60}, {ad: "SOL", y: 40}
    ];

    function modSec(mod) {
        aktifMod = mod;
        document.getElementById('menu').classList.add('hidden');
        document.getElementById('game-container').classList.remove('hidden');
        if(mod === 'gitar') document.getElementById('gitar-modu').classList.remove('hidden');
        else document.getElementById('nota-modu').classList.remove('hidden');
        yeniSoru();
    }

    function yeniSoru() {
        if(hak <= 0) return;
        clearInterval(zamanlayƒ±cƒ±);
        s√ºre = 50;
        mevcutHedef = notalar[Math.floor(Math.random() * notalar.length)];
        document.getElementById('hedef-nota').innerText = mevcutHedef;
        document.getElementById('hedef-nota').style.color = "#ffba08";
        document.getElementById('timer-bar').style.width = "100%";

        if(aktifMod === 'nota') {
            const secilen = notaHavuzu.find(n => n.ad === mevcutHedef) || notaHavuzu[0];
            cizNota(secilen);
            olusturSiklar(mevcutHedef);
        }

        zamanlayƒ±cƒ± = setInterval(() => {
            s√ºre--; document.getElementById('timer-bar').style.width = (s√ºre * 2) + "%";
            if(s√ºre <= 0) hataYap("S√úRE DOLDU!");
        }, 100);
    }

    function cizNota(obj) {
        const svg = document.getElementById('staff-svg');
        let lines = "";
        for(let i=0; i<5; i++) lines += `<line x1="50" y1="${50+i*20}" x2="350" y2="${50+i*20}" stroke="#333" stroke-width="2" />`;
        let ledger = obj.ledger ? `<line x1="180" y1="${obj.y}" x2="220" y2="${obj.y}" stroke="#333" stroke-width="2" />` : "";
        svg.innerHTML = lines + ledger + `<text x="55" y="115" font-size="70" fill="#333">ùÑû</text>
        <ellipse cx="200" cy="${obj.y}" rx="12" ry="9" fill="#e94560" />`;
    }

    function olusturSiklar(dogru) {
        const alan = document.getElementById('siklar'); alan.innerHTML = "";
        let siklar = [dogru, ...notalar.filter(n => n !== dogru).sort(() => 0.5 - Math.random()).slice(0, 4)].sort(() => 0.5 - Math.random());
        siklar.forEach(s => {
            const btn = document.createElement('button'); btn.className = 'btn-secenek'; btn.innerText = s;
            btn.onclick = () => kontrol(s); alan.appendChild(btn);
        });
    }

    function kontrol(tahmin) {
        if(tahmin === mevcutHedef) {
            puan += 10; document.getElementById('puan').innerText = puan;
            document.getElementById('hedef-nota').innerText = "DOƒûRU ‚úÖ";
            document.getElementById('hedef-nota').style.color = "#2ecc71";
            clearInterval(zamanlayƒ±cƒ±); setTimeout(yeniSoru, 1000);
        } else hataYap("YANLI≈û! ‚ùå");
    }

    function hataYap(msg) {
        clearInterval(zamanlayƒ±cƒ±); hak--; document.getElementById('hak').innerText = hak;
        document.getElementById('hedef-nota').innerText = msg; document.getElementById('hedef-nota').style.color = "#e94560";
        if(hak <= 0) document.getElementById('hedef-nota').innerText = "OYUN Bƒ∞TTƒ∞";
        else setTimeout(yeniSoru, 1500);
    }
</script>
</body>
</html>
